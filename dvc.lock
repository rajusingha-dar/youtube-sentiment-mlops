schema: '2.0'
stages:
  ingest_data:
    cmd: python src/components/data_ingestion.py --output_path 
      artifacts/ingested_data
    deps:
    - path: data/reddit_preprocessing.csv
      hash: md5
      md5: 29af2777aecdaea333d19bd2d5204795
      size: 5098032
    - path: src/components/data_ingestion.py
      hash: md5
      md5: 00a7fa7916e4d8d55f48711ae754fd45
      size: 567
    outs:
    - path: artifacts/ingested_data
      hash: md5
      md5: f17b8dd00700080d5009ac3284a0e31e.dir
      size: 5134826
      nfiles: 1
  transform_data:
    cmd: python src/components/data_transformation.py --input_path 
      artifacts/ingested_data --output_path artifacts/transformed_data
    deps:
    - path: artifacts/ingested_data
      hash: md5
      md5: f17b8dd00700080d5009ac3284a0e31e.dir
      size: 5134826
      nfiles: 1
    - path: src/components/data_transformation.py
      hash: md5
      md5: 913d02ed05d5ae61cefca81c2d5516ba
      size: 1447
    params:
      params.yaml:
        base.random_state: 42
        vectorizer:
          name: TfidfVectorizer
          params:
            ngram_range:
            - 1
            - 3
            max_features: 10000
    outs:
    - path: artifacts/transformed_data
      hash: md5
      md5: f58524e51763ab564b9d9b5229648285.dir
      size: 5518366
      nfiles: 3
  train_model:
    cmd: python src/components/model_trainer.py --input_path 
      artifacts/transformed_data --output_path artifacts/trained_model
    deps:
    - path: artifacts/transformed_data
      hash: md5
      md5: f58524e51763ab564b9d9b5229648285.dir
      size: 5518366
      nfiles: 3
    - path: src/components/model_trainer.py
      hash: md5
      md5: dbd102c494811c0243a4182c0e7bf845
      size: 2216
    params:
      params.yaml:
        base:
          random_state: 42
          target_column: category
        model:
          name: LightGBM
          params:
            objective: multiclass
            metric: multi_logloss
            n_estimators: 1200
            learning_rate: 0.05
            num_leaves: 150
            random_state: 42
        resampling:
          name: SMOTE
          params:
            random_state: 42
    outs:
    - path: artifacts/trained_model
      hash: md5
      md5: db0047b2cdbd4ccd3512f36aa6eeb2b4.dir
      size: 62389012
      nfiles: 1
